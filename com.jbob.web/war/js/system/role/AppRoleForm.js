var AppRoleForm=function(c,a){this.roleId=c;this.isCopy=a;var b=this.setup();var d=new Ext.Window({id:"AppRoleFormWin",title:"角色详细信息",iconCls:"menu-role",width:370,height:220,modal:true,minWidth:300,minHeight:200,layout:"anchor",plain:true,bodyStyle:"padding:5px;",buttonAlign:"center",items:[b],buttons:[{text:"保存",iconCls:"btn-save",handler:function(){var f=Ext.getCmp("AppRoleForm");if(a==1){var e=Ext.getCmp("roleName").getValue();Ext.Ajax.request({url:__ctxPath+"/system/checkAppRole.do",params:{roleName:e},method:"post",success:function(h){var g=Ext.util.JSON.decode(h.responseText);if(g.success){if(f.getForm().isValid()){f.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(i,j){Ext.ux.Toast.msg("操作信息","成功信息保存！");Ext.getCmp("AppRoleGrid").getStore().reload();d.close();},failure:function(i,j){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});d.close();}});}}else{Ext.ux.Toast.msg("提示信息","该角色名字已经存在，请更改！");}},failure:function(){}});}else{if(f.getForm().isValid()){f.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(g,h){Ext.ux.Toast.msg("操作信息","成功信息保存！");Ext.getCmp("AppRoleGrid").getStore().reload();d.close();},failure:function(g,h){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});d.close();}});}}}},{text:"取消",iconCls:"btn-cancel",handler:function(){d.close();}}]});d.show();};AppRoleForm.prototype.setup=function(){var a=new Ext.FormPanel({url:__ctxPath+"/system/saveAppRole.do?isCopy="+this.isCopy,layout:"form",id:"AppRoleForm",frame:true,defaults:{widht:400,anchor:"100%,100%"},formId:"AppRoleFormId",defaultType:"textfield",items:[{name:"appRole.roleId",id:"roleId",xtype:"hidden",value:this.roleId==null?"":this.roleId},{fieldLabel:"角色名称",name:"appRole.roleName",id:"roleName"},{fieldLabel:"角色描述",xtype:"textarea",name:"appRole.roleDesc",id:"roleDesc"},{fieldLabel:"状态",hiddenName:"appRole.status",id:"status",xtype:"combo",mode:"local",editable:true,triggerAction:"all",store:[["0","禁用"],["1","可用"]],value:0}]});if(this.roleId!=null&&this.roleId!="undefined"){a.getForm().load({deferredRender:false,url:__ctxPath+"/system/getAppRole.do?roleId="+this.roleId,waitMsg:"正在载入数据...",success:function(b,c){},failure:function(b,c){}});}return a;};